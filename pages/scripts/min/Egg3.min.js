//Egg Timer
function getSModifier(e){var t;return e==0?t="":e==1?t=" ":t="s ",t}function window_RESIZE(e){Egg.staticArea.width($(window).width()-20),Egg.staticArea.height($(window).height()-20),Egg.updateText(),Egg.updateProgressBar()}var Egg={name:"EggTimer",defaultText:"",expiredMessage:"Time Expired!",title:"",label:"",progress:0,startTime:0,endTime:0,totalTime:0,parseError:"",progressBar:null,progressText:null,staticArea:null,beep:null,currDate:null,endDate:null,ticker:null,useWorker:!1,worker:null,workerLock:!1,startButton:null,volume:1,start:function(){if(Egg.parseError!==""&&Egg.parseError!=="none"){Egg.progressText.html(Egg.defaultText),Egg.updateText(Egg.defaultText);return}Egg.useWorker&&(Egg.worker=new Worker("/scripts/DateCalculator.js"),Egg.worker.onmessage=Egg.workerUpdate),Egg.endDate=new Date((new Date).getTime()+(Egg.endTime-Egg.startTime)),Egg.currDate=new Date,Egg.totalTime=Egg.endTime-Egg.startTime,Egg.update(),Egg.ticker=setInterval(Egg.update,1e3/12)},update:function(){Egg.useWorker&&!Egg.workerLock?(Egg.workerLock=!0,Egg.worker.postMessage({startDate:Egg.currDate.getTime(),endDate:Egg.endDate.getTime()})):Egg.useWorker||(Time.calcTime(Egg.currDate.getTime(),Egg.endDate.getTime()),Egg.updateParts(Time))},workerUpdate:function(e){var t=e.data;Egg.updateParts(t),Egg.workerLock=!1},updateParts:function(e){if(e.totalSeconds<0){clearInterval(Egg.ticker),Egg.onTimeComplete();return}var t=e.remainingYears<=0?"":e.remainingYears+" year",n=getSModifier(e.remainingYears),r=e.remainingMonths<=0?"":e.remainingMonths+" month",i=getSModifier(e.remainingMonths),s=e.remainingDays<=0?"":e.remainingDays+" day",o=getSModifier(e.remainingDays),u=e.remainingHours<=0?"":e.remainingHours+" hour",a=getSModifier(e.remainingHours),f=e.remainingMinutes<=0?"":e.remainingMinutes+" minute",l=getSModifier(e.remainingMinutes),c=e.remainingSeconds<=0?"0 seconds":e.remainingSeconds+" second",h=getSModifier(e.remainingSeconds),p=Egg.label&&Egg.label!=""?Egg.label+"<br />":"",d=p+t+n+r+i+s+o+u+a+f+l+c+h;Egg.updateTitle(d),Egg.updateText(d),Egg.progress=(Egg.totalTime-e.totalMilliseconds)/Egg.totalTime,Egg.updateProgressBar(),Egg.currDate=new Date},updateTitle:function(e){var t=Egg.title&&Egg.title!==""?Egg.title:e.split("<br />").join(" - ");document.title=t+" - E.ggtimer"},updateProgressBar:function(){var e=$(window).width(),t=$(window).height();Egg.progressBar&&Egg.progressBar.width(e*Egg.progress)},updateText:function(e){e&&Egg.progressText.html(e)},onTimeComplete:function(){Egg.progress=1,Egg.updateTitle(Egg.expiredMessage),Egg.updateText(Egg.expiredMessage),Egg.updateProgressBar(),Egg.beep&&Egg.beep.play&&(Egg.beep.volume=Egg.volume,Egg.beep.play()),Egg.showAlert()},showAlert:function(){alert(Egg.expiredMessage)}};$(function(){Egg.progressBar=$("#progress"),Egg.staticArea=$("#static"),Egg.staticArea.width($(window).width()-20),Egg.staticArea.height($(window).height()-20),Egg.progressText=$("#progressText"),Egg.startButton=$("#progressText"),Egg.updateText(""),Egg.beep=document.getElementById("beepbeep"),Egg.useWorker=!1,$(window).bind("resize",window_RESIZE),window_RESIZE(),navigator.userAgent.match(/iphone/i)||navigator.userAgent.match(/ipad/i)?(Egg.updateText("Tap to Start"),Egg.startButton.click(function(){Egg.beep&&Egg.beep.load&&Egg.beep.load(),Egg.start(),Egg.startButton.unbind("click")}),Egg.startButton.show()):(Egg.beep&&Egg.beep.load&&Egg.beep.load(),Egg.start())})